import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import"./fab-menu-Cwgyy1vS.js";import{a as f,b as g,d as I,u as b,o as L,e as R}from"./main-FuKyY6VI.js";const y=document.getElementById("profileImage"),v=document.getElementById("profileFileInput"),h=document.getElementById("personalInfoFields"),B=document.getElementById("nameInput"),E=document.getElementById("cityInput"),i=document.getElementById("campusInput1"),r=document.getElementById("campusInput2"),m=document.getElementById("mobilityAid"),w=document.getElementById("frequentRoutes"),p=document.getElementById("uploadButton"),k=document.getElementById("editButton"),A=document.getElementById("saveButton");let u=null;function U(a,e=300){return new Promise(c=>{const t=new Image;t.onload=()=>{const n=document.createElement("canvas"),l=n.getContext("2d");let s=t.width,o=t.height;s>o?s>e&&(o*=e/s,s=e):o>e&&(s*=e/o,o=e),n.width=s,n.height=o,l.drawImage(t,0,0,s,o);const d=n.toDataURL("image/jpeg",.75);c(d)},t.src=URL.createObjectURL(a)})}function q(){L(f,async a=>{if(a)try{const e=g(I,"users",a.uid),c=await R(e);if(!c.exists())return;const t=c.data();B.value=t.name||"",E.value=t.city||"",w.value=t.frequentRoutes||"",m.value=t.mobilityAid||m.value;const n=t.campus||"";i.checked=n===i.value,r.checked=n===r.value,t.profileImage&&(y.src=t.profileImage)}catch(e){console.error("Error loading user:",e)}})}q();p.addEventListener("click",()=>{v.click()});v.addEventListener("change",async a=>{const e=a.target.files[0];e&&(u=await U(e),y.src=u)});k.addEventListener("click",()=>{h.disabled=!1,p.classList.remove("hidden")});A.addEventListener("click",async()=>{const a=f.currentUser;if(!a){alert("Please sign in first.");return}const e=g(I,"users",a.uid),c=B.value,t=E.value;let n="";i.checked&&(n=i.value),r.checked&&(n=r.value);const l=m.value,s=w.value,o={name:c,campus:n,city:t,mobilityAid:l,frequentRoutes:s};u&&(o.profileImage=u);try{await b(e,o),alert("Profile updated!"),h.disabled=!0,p.classList.add("hidden"),u=null}catch(d){console.error("Error saving profile:",d),alert("Error saving profile.")}});
